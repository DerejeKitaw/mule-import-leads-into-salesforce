<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:file="http://www.mulesoft.org/schema/mule/file"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd">
	<file:config name="File_Config" doc:name="File Config" doc:id="011bc8ab-8b04-4842-94d3-fb8af1bf24db" >
		<file:connection workingDir="${file.workingDirectory}" />
	</file:config>
	<http:listener-config name="HTTP_Listener_config" doc:name="HTTP Listener config" doc:id="77ed03f2-4ab0-4434-b812-8b3c6dc02a68" >
		<http:listener-connection host="0.0.0.0" port="8081" />
	</http:listener-config>
	<configuration-properties doc:name="Configuration properties" doc:id="32869fba-71b3-4ddd-8251-ed62032f770b" file="dev.yaml" />
	<flow name="mule-import-leads-into-salesforceFlow" doc:id="dd65aeb7-5cfc-41f1-866a-d0c78aca8610" >
		<http:listener doc:name="Listener" doc:id="9751ee0c-6a4f-4c38-be57-ec074469c5d9" config-ref="HTTP_Listener_config" path="/transfer"/>
		<file:read doc:name="Read the CSV file" doc:id="114893a6-3297-4b79-b0b2-952a749e2533" config-ref="File_Config" path="${file.fileName}" outputMimeType="text/csv"/>
		<ee:transform doc:name="Transform CSV to Maps" doc:id="826408fe-3921-4503-8567-68d5cb3a10f3" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/java
---
payload map {
	Company    : $.company,
	Email      : $.email,
	FirstName  : $.firstName,
	LastName   : $.lastName
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<ee:transform doc:name="Transform Message" doc:id="4ee41dd6-b7f3-48a1-97bc-468efaeb777f" >
			<ee:message >
				<ee:set-payload ><![CDATA[%dw 2.0
output application/json
---
payload]]></ee:set-payload>
			</ee:message>
		</ee:transform>
	</flow>
</mule>
